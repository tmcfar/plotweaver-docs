---
schema_version: "1.0.0"
last_updated: "2025-06-28"
type: "physical_structure"
maintainer: "PlotWeaver Team"

project:
  name: PlotWeaver
  description: "AI-first collaborative manuscript dependency management platform"
  repository: "https://github.com/tmcfar/PlotWeaver/"
  language: "Python"
  min_version: "3.12"
  
dependencies:
  required:
    python: ">=3.12"
    git: ">=2.30"
    sqlite: ">=3.35"
  optional:
    plantuml: ">=1.2"
    graphviz: ">=2.40"

root_files:
  config:
    - file: pyproject.toml
      purpose: "Project configuration and build settings"
    - file: pytest.ini
      purpose: "Test configuration"
    - file: .flake8
      purpose: "Linting rules"
    - file: setup.py
      purpose: "Package installation"
    - file: requirements.txt
      purpose: "Direct dependencies"
  
  scripts:
    - file: check_environment.py
      purpose: "Validates development environment"
    - file: start_aider.sh
      purpose: "Development assistance startup"
    - file: safety_check.py
      purpose: "Security validation"
  
  project_files:
    - file: README.md
      purpose: "Project documentation"
    - file: STAGED_ENRICHMENT_STATUS.md
      purpose: "Feature status tracking"

directory_structure:
  src:
    plotweaver:
      agents:
        base:
          files:
            - agent_context.py
            - agent_result.py
            - base_agent.py
            - exceptions.py
          purpose: "Core agent infrastructure and base classes"
        enhancement:
          files:
            - setting_enrichment_agent.py
          purpose: "Scene and setting enhancement capabilities"
        quality:
          files:
            - __init__.py
            - character_voice_agent.py
            - character_body_language_agent.py
            - character_subtext_agent.py
            - sensory_continuity_agent.py
            - style_agent.py
          purpose: "Quality control and validation systems"
        setting:
          files:
            - character_agent.py
            - concept_agent.py
            - plot_agent.py
          purpose: "Story foundation and character management"
        writing:
          files:
            - scene_writer_agent.py
          purpose: "Content generation and narrative writing"
      
      core:
        files:
          - config.py
          - git_manager.py
          - project_config.py
        purpose: "Core system services and configuration"
      
      migration:
        files:
          - openrouter_client.py
        purpose: "External API integration and migration utilities"
      
      orchestration:
        files:
          - agent_runner.py
          - quality_loop.py
        purpose: "Workflow coordination and execution management"
      
      search:
        files:
          - search_service.py
        purpose: "Content discovery and indexing"
      
      storage:
        files:
          - file_manager.py
          - metadata_manager.py
        purpose: "File system and metadata management"
      
      utils:
        files:
          - prompt_manager.py
          - validation.py
        purpose: "Utility functions and validation helpers"

monitoring_points:
  - path: "/src/plotweaver/agents/base"
    check: "agent_initialization"
    metric: "agent_startup_time"
  - path: "/src/plotweaver/quality"
    check: "quality_loop_health"
    metric: "iteration_count"
  - path: "/src/plotweaver/search"
    check: "search_index_health"
    metric: "query_latency"

resource_requirements:
  memory:
    minimum: "4GB"
    recommended: "8GB"
  storage:
    minimum: "1GB"
    recommended: "5GB"
  cpu:
    minimum: "2 cores"
    recommended: "4 cores"

security:
  sensitive_paths:
    - "src/plotweaver/migration/openrouter_client.py"
    - "src/plotweaver/core/git_manager.py"
  required_reviews: 1
  static_analysis: true
